(function(a){function b(b,c){var d=location.hash,b=b,c=c,e=0,f,g,h,i,j;if(typeof history.pushState==="undefined"){var k=false,l;l=this;setInterval(function(){if(location.hash!==d){l.call(location.hash.substring(2))}},100)}else{var k=true,l;l=this;window.onpopstate=function(a){if(a.state!==null){if("ajax"===a.state.type){l.call(document.location.pathname,b,true)}}}}this.before=function(a,b){};this.success=function(a,b){};this.after=function(a,b){};this.error=function(a,b){};this.insert=function(b,c,d){a(c).html(d)};this.call=function(b,d,e){d=typeof d!=="undefined"?d:"#content";e=typeof e!=="undefined"?e:false;var f=this;f.before(b,d);a.ajax({cache:false,async:true,type:"GET",url:b,success:function(e){if(0!==a(e).find(d).parent().size()){e=a(e).find(d).html()}f.insert(b,d,e);if(0!==a(d).find(c).size()){a(d).find(c).click(function(){event.preventDefault();f.call(a(this).attr("href"),d)})}f.success(b,d);if(typeof callback=="function"){callback(b)}}});f.after(b,d);if(true!==e){this.pushState(b)}};this.pushState=function(a){if(true===k){history.pushState({type:"ajax"},"title "+this.pagecount,a);e++}else{location.hash="#!"+a;d=location.hash}};this.pushState(document.location.pathname)}"use strict";a.fn.asfar=function(){if("#!"===location.hash.substring(0,2)){location.href=location.hash.substring(2)}if(typeof arguments[0]==="undefined"||typeof arguments[0]["selector"]==="undefined"){var c='a[href*="'+document.location.host+'"], a[href^="/"], a:not([href^="http://"])'}else{var c=arguments[0]["selector"]}var d=a(this).selector;var e=new b(d,c);if(typeof arguments[0]!=="undefined"){if(typeof arguments[0]["before"]!=="undefined"){e.before=arguments[0]["before"]}if(typeof arguments[0]["insert"]!=="undefined"){e.insert=arguments[0]["insert"]}if(typeof arguments[0]["success"]!=="undefined"){e.success=arguments[0]["success"]}if(typeof arguments[0]["after"]!=="undefined"){e.after=arguments[0]["after"]}if(typeof arguments[0]["error"]!=="undefined"){e.error=arguments[0]["error"]}}a(c).click(function(b){b.preventDefault();e.call(a(this).attr("href"),d)})}})(jQuery)